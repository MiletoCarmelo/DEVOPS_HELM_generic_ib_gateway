# values.yaml
image:
  repository: ghcr.io/gnzsnz/ib-gateway
  tag: "stable"
  pullPolicy: IfNotPresent


nameOverride: ""
fullnameOverride: ""

env:  
  - name: TRADING_MODE
    value: "live"
  - name: BYPASS_WARNING
    value: "yes"
  - name: TIME_ZONE
    value: "Europe/Paris"
  - name: TZ
    value: "Europe/Paris"
  - name: JAVA_HEAP_SIZE
    value: "1024"
  - name: TWS_SETTINGS_PATH
    value: "/config/ibgateway/Jts"      


serviceAccount:
  create: true
  name: ""
  annotations: {}

service:
  type: NodePort  # Changer de ClusterIP à NodePort
  annotations: {}

persistence:
  enabled: false
  accessMode: ReadWriteOnce
  storageClass: standard
  size: 10Gi

# Configuration du namespace
namespace:
  name: "ib-gateway"

ingress:
  enabled: true
  className: "nginx"  # ou votre classe d'ingress préférée
  annotations: {}
  hosts:
    - host: ibgateway.local  # remplacez par votre nom d'hôte par défaut
      paths:
        - path: /
          pathType: Prefix
          port: 4002  # port API par défaut

# Configuration des secrets
secret:
  name: "ib-gateway-secrets"

# Configuration IB Gateway
mode: "live"
port: "4001"
apiPort: "4002"
timezone: "Europe/Paris"
  # Configuration des ports
    
ports:
  - name: gateway
    port: 4003
    targetPort: 4003
    protocol: TCP
  - name: api
    port: 4004
    targetPort: 4004
    protocol: TCP
  - name: vnc
    port: 5900
    targetPort: 5900
    protocol: TCP

# Configuration des ressources
resources:
  limits:
    cpu: "1"
    memory: "1Gi"
  requests:
    cpu: "500m"
    memory: "512Mi"

probes:
  liveness:
    enabled: false
    initialDelaySeconds: 5
    periodSeconds: 5
  readiness:
    enabled: false
    initialDelaySeconds: 5
    periodSeconds: 5

logging:
  level: debug

security:
  autoRestartOnDisconnect: true

# Configuration NoVNC
novnc:
  enabled: true
  image:
    repository: theasp/novnc
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: NodePort  # Changer de ClusterIP à NodePort
    port: 6080
  display:
    width: "1280"
    height: "720"

# Configuration VNC
vnc:
  enabled: true
  port: "5900"
  password: "myVNCpass"